<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--客户映射 指定到dao接口 -->
<mapper namespace="com.park.ssm.dao.BillDao">


<sql id="sqlField">
	id,userId,parkingLotId,accountId,price,billStartDate,billEndDate,isPaid
</sql>

<!-- 通过id加载账单 -->
<select id="loadBillByIdForUpdate" parameterType="Long" resultType="Bill">
select 
	<include refid="sqlField"/>
from Bill
where id=#{_parameter}	
for update
</select>

<!-- 通过id加载账单 -->
<select id="listBillByUserId" parameterType="Long"  resultType="Bill">
select 
	<include refid="sqlField"/>
from Bill
where userId=#{_parameter}	
</select>

<select id="listBillByAccountId" parameterType="Long" resultType="Bill">
select 
	<include refid="sqlField"/>
from Bill
where accoutId=#{_parameter}	
</select>

<select id="listBillByParkingLotId" parameterType="Integer"  resultType="Bill">
select 
	<include refid="sqlField"/>
from Bill
where parkingLotId=#{_parameter}	
</select>

<update id="updateBillStateById">
update Bill 
	set isPaid=1
where id=#{_parameter}
</update>

</mapper>
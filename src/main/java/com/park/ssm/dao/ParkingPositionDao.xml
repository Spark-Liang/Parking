<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!--客户映射 指定到dao接口 -->
<mapper namespace="com.park.ssm.dao.ParkingPositionDao">


<resultMap type="ParkingPosition" id="parkingPositionRoughResult">
	<id property="id" column="id"/>
	<result property="state" column="state"  typeHandler="com.park.ssm.entity.type.ParkingPositionStateHandler"/>
	<association property="parkingLot" column="parkingLotId" javaType="ParkingLot" fetchType="lazy" select="com.park.ssm.dao.ParkingLotDao.loadParkingLotById"/>
	<association property="account" column="accountId" javaType="Account" fetchType="lazy" select="com.park.ssm.dao.AccountDao.loadAccountById" />
</resultMap>



<!-- 加载的ParkingPosition中所有的bean属性为代理对象 -->
<select id="loadParkingPositionByLotId" parameterType="int" resultMap="parkingPositionRoughResult">
	select 
		id,state,parkingLotId,accountId
	from ParkingPosition
	where parkingLotId=#{_parameter}
</select>


<select id="loadParkingPositionById"  parameterType="long" resultMap="parkingPositionRoughResult" >
	select * from ParkingPosition	
	where id=#{_parameter}
</select>
<select id="loadParkingPositionByIdForUpdate" parameterType="long"  resultMap="parkingPositionRoughResult">
	select * from ParkingPosition	
	where id=#{_parameter}
	for update
</select>


<insert id="insertParkingPosition" parameterType="List" >
insert into ParkingPosition(parkingLotId) values
<foreach collection="list" item="parkingLotId" separator=",">(#{parkingLotId})</foreach>
</insert>


 
</mapper>